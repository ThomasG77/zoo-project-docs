<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Building blocks presentation - Using OGR and PgRouting based Web Services &mdash; ZOO Project 1.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="ZOO Project 1.3 documentation" href="../../index.html" />
    <link rel="up" title="ZOO-Project: playing with building blocks to build pgRouting web application" href="index.html" />
    <link rel="next" title="Playing with buildign blocks - Creating JavaScript Web Services" href="js_services_chaining.html" />
    <link rel="prev" title="Creating your first ZOO Service" href="first_service.html" />

<script type="text/javascript">
$(document).ready(function(){

	$("ul.topnav li a").hover(function() {

		//Following events are applied to the subnav itself (moving subnav up and down)
		$(this).parent().find("ul.subnav").slideDown('fast').show(); //Drop down the subnav on click

		$(this).parent().hover(function() {
		}, function(){
			$(this).parent().find("ul.subnav").slideUp('slow'); //When the mouse hovers out of the subnav, move it back up
		});

		//Following events are applied to the trigger (Hover events for the trigger)
		}).hover(function() {
			$(this).addClass("subhover"); //On hover over, add class "subhover"
		}, function(){	//On Hover Out
			$(this).removeClass("subhover"); //On hover out, remove class "subhover"
	});

});
</script>

     

  </head>
  <body>
<!-- Begin Header -->
<div id="wrapper">
  	<div id="myheader">
    	<div class="hleft">
    	  <h1 class="title">Open WPS Platform</h1>
    	</div>
    	<div class="hright">
    	</div>
  	</div>
</div>
<ul class="topnav">
  <li><a href="http://www.zoo-project.org/">Home</a></li>
  <li><a href="#">ZOO Project</a>
       <ul class="subnav">

         <li><a href="/site/ZooWebSite/ZooProject/About">About</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Tribe">ZOO Tribe</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Events">Events</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Photos">Photos</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Contact">Contacts</a></li>
       </ul>

  </li>
  <li>
    <a href="#">Components</a>
    <ul class="subnav">
      <li><a href="/site/ZooWebSite/ZooKernel">ZOO Kernel</a></li>
      <li><a href="/site/ZooWebSite/ZooServices">ZOO Services</a></li>
      <li><a href="/site/ZooWebsite/ZooApi">ZOO API</a></li>

    </ul>
  </li>
  <li><a href="/site/Downloads">Download</a></li>
  <li><a href="#">Docs</a>
    <ul class="subnav">
      <li><a href="../../../en/index.html">English</a></li>
      <li><a href="../../../fr/index.html">Français</a></li>
    </ul>
  </li>
  <li><a href="#">Demos</a>
    <ul class="subnav">
      <li><a href="/site/ZooWebSite/Demo/SpatialTools">ZOO Spatial Tools</a></li>

      <li><a href="/site/ZooWebSite/Demo/CGAL">ZOO CGAL Vor</a></li>
      <li><a href="/site/ZooWebSite/Demo/WFS-T">ZOO Mapserver WFS-T</a></li>
      <li><a href="/site/ZooWebSite/Demo/GdalProfile">ZOO Elevation Profile</a></li>
      <li><a href="/site/ZooWebSite/Demo/FormTools">ZOO Form tools</a></li>
    </ul>
  </li>
  <li><a href="/trac">Trac</a></li>
</ul>
<!-- End Header -->
    

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="js_services_chaining.html" title="Playing with buildign blocks - Creating JavaScript Web Services"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="first_service.html" title="Creating your first ZOO Service"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">ZOO Docs</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">ZOO-Project: playing with building blocks to build pgRouting web application</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="building-blocks-presentation-using-ogr-and-pgrouting-based-web-services">
<span id="ogr-base-vect-ops"></span><h1><a class="toc-backref" href="#table-of-contents">Building blocks presentation - Using OGR and PgRouting based Web Services</a><a class="headerlink" href="#building-blocks-presentation-using-ogr-and-pgrouting-based-web-services" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#building-blocks-presentation-using-ogr-and-pgrouting-based-web-services" id="id1">Building blocks presentation - Using OGR and PgRouting based Web Services</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#services-provider-and-configuration-files" id="id3">Services Provider and configuration files</a></li>
<li><a class="reference internal" href="#the-buffer-service" id="id4">The Buffer Service</a></li>
<li><a class="reference internal" href="#the-intersection-service" id="id5">The Intersection Service</a></li>
<li><a class="reference internal" href="#the-differencepy-service" id="id6">The DifferencePy Service</a></li>
<li><a class="reference internal" href="#the-routing-and-profile-services" id="id7">The Routing and Profile Services</a></li>
<li><a class="reference internal" href="#conclusion" id="id8">Conclusion</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In this section, you will use basic ZOO-Services : <tt class="docutils literal"><span class="pre">Buffer</span></tt>,
<tt class="docutils literal"><span class="pre">Intersection</span></tt> and <tt class="docutils literal"><span class="pre">DifferencePy</span></tt> which use OGR and psycopg Python modules.
The intended goal of this section is to present and interact with your new building blocks before chaining them in the next section.</p>
<p>First of all, you should use the following links to access the user
interfaces and interact with your services, the first one is used to
access basic spatial-tools demo client interface and  the second to
access the routing application :</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://localhost/zoows2013-demo/spatialtools-py.html">http://localhost/zoows2013-demo/spatialtools-py.html</a></li>
<li><a class="reference external" href="http://localhost/zoo-ws2013/">http://localhost/zoo-ws2013/</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="services-provider-and-configuration-files">
<h2><a class="toc-backref" href="#table-of-contents">Services Provider and configuration files</a><a class="headerlink" href="#services-provider-and-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>First you may verify if the ZOO-Services are available from your current setup.
You can take a look at the <tt class="docutils literal"><span class="pre">Buffer.zcfg</span></tt>, <tt class="docutils literal"><span class="pre">Intersection.zcfg</span></tt> and
<tt class="docutils literal"><span class="pre">DifferencePy.zcfg</span></tt> to get details about parameters.
As you can see from the ZCFG files, you will use ZOO-Services provided by the
<tt class="docutils literal"><span class="pre">service</span></tt> Python service provider. So if you want to modify the Python code
you will have to edit the corresponding file (so <tt class="docutils literal"><span class="pre">service.py</span></tt>).
You are invited to use similar requests as the one used in previous
sections to learn about each services individually.</p>
</div>
<div class="section" id="the-buffer-service">
<h2><a class="toc-backref" href="#table-of-contents">The Buffer Service</a><a class="headerlink" href="#the-buffer-service" title="Permalink to this headline">¶</a></h2>
<p>First click on a street then once the street is displayed in blue, click the
&#8216;Buffer&#8217; button on top, you should get similar result as displayed in the following.</p>
<a class="reference internal image-reference" href="../../_images/Buffer_Level_151.png"><img alt="../../_images/Buffer_Level_151.png" class="align-center" src="../../_images/Buffer_Level_151.png" style="width: 650px;" /></a>
<p>Since version ZOO-Project 1.2.0, you can run automatically some basic tests to
make sure that you wrote a correct ZCFG file and your service is validating.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the current testing is really simple and should be adapted to each Services
Provider, mainly to define input names.</p>
</div>
<p>You can use the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /home/user/zoo/testing
./run.sh http://localhost/cgi-bin/zoo_loader.cgi Buffer
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">During or after the test run, you can take a look inside the <tt class="docutils literal"><span class="pre">tmp</span></tt> directory
which contains both the XML requests send to the ZOO Kernel (<tt class="docutils literal"><span class="pre">*1.xml</span></tt>) and the
responses it gave (<tt class="docutils literal"><span class="pre">output*.xml</span></tt>).</p>
</div>
</div>
<div class="section" id="the-intersection-service">
<h2><a class="toc-backref" href="#table-of-contents">The Intersection Service</a><a class="headerlink" href="#the-intersection-service" title="Permalink to this headline">¶</a></h2>
<p>Using the same client interface as before, once you get a Buffer, you can then
select a street intersecting the Buffer geometry to compute intersection by clicking on the Intersection button.</p>
<a class="reference internal image-reference" href="../../_images/Intersection_Level_151.png"><img alt="../../_images/Intersection_Level_151.png" class="align-center" src="../../_images/Intersection_Level_151.png" style="width: 650px;" /></a>
</div>
<div class="section" id="the-differencepy-service">
<h2><a class="toc-backref" href="#table-of-contents">The DifferencePy Service</a><a class="headerlink" href="#the-differencepy-service" title="Permalink to this headline">¶</a></h2>
<p>Using the same instructions as for Intersetion, you can get the following result.</p>
<a class="reference internal image-reference" href="../../_images/Difference_Level_151.png"><img alt="../../_images/Difference_Level_151.png" class="align-center" src="../../_images/Difference_Level_151.png" style="width: 650px;" /></a>
</div>
<div class="section" id="the-routing-and-profile-services">
<h2><a class="toc-backref" href="#table-of-contents">The Routing and Profile Services</a><a class="headerlink" href="#the-routing-and-profile-services" title="Permalink to this headline">¶</a></h2>
<p>First click on the blue flag then place your starting point on the
map, do the same with the red flag to get the shortest path computed
by the dedicated service and then display its profile. Note that when
you pass the mouse over the profile display then you will see its
corresponding position displayed on the map. You can also click on a
specific step in your path to get the corresponding line displayed.</p>
<a class="reference internal image-reference" href="../../_images/Routing_Basic.png"><img alt="../../_images/Routing_Basic.png" class="align-center" src="../../_images/Routing_Basic.png" style="width: 650px;" /></a>
<p>If you take a look in the file: <tt class="docutils literal"><span class="pre">/usr/lib/cgi-bin/routing/do.zcfg</span></tt>
you may notice something new in the supported format which is
reproduced here after.</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="nt">&lt;Supported&gt;</span>
 mimeType = image/png
 asReference = true
 msStyle = STYLE COLOR 125 0 105 OUTLINECOLOR 0 0 0 WIDTH 3 END
 useMapServer = true
 extension = json
<span class="nt">&lt;/Supported&gt;</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">mimeType</span></tt> is defined as <tt class="docutils literal"><span class="pre">image/png</span></tt> and there is two new
parameter which are both optional:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">useMapServer</span></tt>: which make you able to inform the ZOO-Kernel
that it have to use MapServer to publish your result as WMS / WFS or WCS (this last
won&#8217;t be used in this workshop) rather than simply storing the
result as a file.</li>
<li><tt class="docutils literal"><span class="pre">msStyle</span></tt>: which let you define your own MapServer <tt class="docutils literal"><span class="pre">STYLE</span></tt> block definition.</li>
</ul>
</div></blockquote>
<p>When you need to access a result many time or for different purpose
accross other services then it is really useful to ask ZOO-Kernel to
publish your result as WMS, WFS or WCS.</p>
<p>Note that no modification of the code of the do service was required
to handle automatic pubilcation of the result as it is a vector format
supported by OGR, only modification of the zcfg was required.</p>
<p>This routing example is here to illustrate how easy it is to publish
your result as WMS, WFS or WCS ressource. Indeed, when your routing
service was called, ZOO-Kernel published the result as WMS and WFS
ressources which was both used first for the UI purpose, the WMS to
display the resulting path on the map, the WFS for displaying details
about each steps. The WFS protocol is also used as the input value
for the profile computation. So, the computation was run once
and accessed three times for different purposes and from different
clients.</p>
<p>For more informations about the MapServer support, please refer to <a class="reference external" href="http://zoo-project.org/docs/kernel/mapserver.html">the
official  ZOO-Project Documentation</a>.</p>
</div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#table-of-contents">Conclusion</a><a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>Now you know this three services, and you get a simple interface to interact
with your MapServer WFS and your ZOO-Project WPS Servers, you are ready to use
the Services in a different way, by chaining them using the JavaScript ZOO-API to build
more complexe and powerfull services.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../kernel/index.html">ZOO Kernel Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/index.html">ZOO Services Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">ZOO API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2010/index.html">Workshop: Practical Introduction to ZOO: The Open WPS Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2012/index.html">Practical Introduction to ZOO-Project by playing with building blocks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ZOO-Project: playing with building blocks to build pgRouting web application</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#foss4g-2013-nottingham">FOSS4G 2013 Nottingham</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#foss4g-cee-2013-bucharest">FOSS4G-CEE 2013 Bucharest</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sponsored-by">Sponsored By</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#special-thanks-to-our-knowledge-partners">Special thanks to our Knowledge Partners</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#workshop-table-of-content">WorkShop table of content</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l3"><a class="reference internal" href="first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">ZOO Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/documentation.html">Documentation Development Guide</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<!-- Begin Footer -->
<div id="footer">
<div>

<div>
  <div class="menuContainer">
    <div class="menuItemList">
      <a href="../../index.html" shape="rect">Home</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">ZOO Project</a>

      <br/>
      <a href="/site/ZooWebSite/ZooProject/About" shape="rect">About</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Tribe" shape="rect">ZOO Tribe</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Events" shape="rect">Events</a>
      <br/>

      <a href="/site/ZooWebSite/ZooProject/Photos" shape="rect">Photos</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Contact" shape="rect">Contacts</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Components</a>

      <br/>
      <a href="/site/ZooWebSite/ZooKernel" shape="rect">ZOO Kernel</a>
      <br/>
      <a href="/site/ZooWebSite/ZooServices" shape="rect">ZOO Services</a>
      <br/>
      <a href="/site/ZooWebsite/ZooApi" shape="rect">ZOO API</a>
      <br/>

    </div>
    <div class="menuItemList">
      <a href="../../dl/index.html" shape="rect">Download</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Docs</a>

      <br/>
      <a href="../../doc/en/index.html" shape="rect">English version</a>
      <br/>
      <a href="../../doc/fr/index.html" shape="rect">version française</a>
      <br/>

    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Demos</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/SpatialTools" shape="rect">ZOO Spatial Tools</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/WFS-T" shape="rect">ZOO Mapserver WFS-T</a>

      <br/>
      <a href="/site/ZooWebSite/Demo/GdalProfile" shape="rect">ZOO Elevation Profile</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/FormTools" shape="rect">ZOO Form tools</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="/trac" shape="rect">Trac</a>

      <br/>
    </div>
  </div>
  <br style="clear:both"/>
</div>
</div>
<p>
&copy; Copyright 2011 - <a class="ext-link" href="http://www.zoo-project.org" shape="rect"><span class="icon"> </span>ZOO Project</a> - All Rights Reserved. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b3.
</p>
</div>
<!-- End Footer -->
    
    <div class="footer">
    </div>

  </body>
</html>