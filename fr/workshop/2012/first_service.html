<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating your first ZOO Service &mdash; ZOO Project 1.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="ZOO Project 1.3 documentation" href="../../index.html" />
    <link rel="up" title="Practical Introduction to ZOO-Project by playing with building blocks" href="index.html" />
    <link rel="next" title="Presenting building blocks - Using OGR based Web Services" href="building_blocks_presentation.html" />
    <link rel="prev" title="Configuration and ZOO-Kernel use" href="using_zoo_from_osgeolivevm.html" />

<script type="text/javascript">
$(document).ready(function(){

	$("ul.topnav li a").hover(function() {

		//Following events are applied to the subnav itself (moving subnav up and down)
		$(this).parent().find("ul.subnav").slideDown('fast').show(); //Drop down the subnav on click

		$(this).parent().hover(function() {
		}, function(){
			$(this).parent().find("ul.subnav").slideUp('slow'); //When the mouse hovers out of the subnav, move it back up
		});

		//Following events are applied to the trigger (Hover events for the trigger)
		}).hover(function() {
			$(this).addClass("subhover"); //On hover over, add class "subhover"
		}, function(){	//On Hover Out
			$(this).removeClass("subhover"); //On hover out, remove class "subhover"
	});

});
</script>

     

  </head>
  <body>
<!-- Begin Header -->
<div id="wrapper">
  	<div id="myheader">
    	<div class="hleft">
    	  <h1 class="title">Open WPS Platform</h1>
    	</div>
    	<div class="hright">
    	</div>
  	</div>
</div>
<ul class="topnav">
  <li><a href="http://www.zoo-project.org/">Home</a></li>
  <li><a href="#">ZOO Project</a>
       <ul class="subnav">

         <li><a href="/site/ZooWebSite/ZooProject/About">About</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Tribe">ZOO Tribe</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Events">Events</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Photos">Photos</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Contact">Contacts</a></li>
       </ul>

  </li>
  <li>
    <a href="#">Components</a>
    <ul class="subnav">
      <li><a href="/site/ZooWebSite/ZooKernel">ZOO Kernel</a></li>
      <li><a href="/site/ZooWebSite/ZooServices">ZOO Services</a></li>
      <li><a href="/site/ZooWebsite/ZooApi">ZOO API</a></li>

    </ul>
  </li>
  <li><a href="/site/Downloads">Download</a></li>
  <li><a href="#">Docs</a>
    <ul class="subnav">
      <li><a href="../../../en/index.html">English</a></li>
      <li><a href="../../../fr/index.html">Français</a></li>
    </ul>
  </li>
  <li><a href="#">Demos</a>
    <ul class="subnav">
      <li><a href="/site/ZooWebSite/Demo/SpatialTools">ZOO Spatial Tools</a></li>

      <li><a href="/site/ZooWebSite/Demo/CGAL">ZOO CGAL Vor</a></li>
      <li><a href="/site/ZooWebSite/Demo/WFS-T">ZOO Mapserver WFS-T</a></li>
      <li><a href="/site/ZooWebSite/Demo/GdalProfile">ZOO Elevation Profile</a></li>
      <li><a href="/site/ZooWebSite/Demo/FormTools">ZOO Form tools</a></li>
    </ul>
  </li>
  <li><a href="/trac">Trac</a></li>
</ul>
<!-- End Header -->
    

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="building_blocks_presentation.html" title="Presenting building blocks - Using OGR based Web Services"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="using_zoo_from_osgeolivevm.html" title="Configuration and ZOO-Kernel use"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">ZOO Docs</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Practical Introduction to ZOO-Project by playing with building blocks</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-your-first-zoo-service">
<span id="first-service"></span><h1><a class="toc-backref" href="#table-of-contents">Creating your first ZOO Service</a><a class="headerlink" href="#creating-your-first-zoo-service" title="Lien permanent vers ce titre">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#creating-your-first-zoo-service" id="id3">Creating your first ZOO Service</a><ul>
<li><a class="reference internal" href="#introduction" id="id4">Introduction</a></li>
<li><a class="reference internal" href="#service-and-publication-process-overview" id="id5">Service and publication process overview</a></li>
<li><a class="reference internal" href="#creating-your-first-zcfg-file" id="id6">Creating your first ZCFG file</a></li>
<li><a class="reference internal" href="#test-requests" id="id7">Test requests</a><ul>
<li><a class="reference internal" href="#test-the-getcapabilities-request" id="id8">Test the GetCapabilities request</a></li>
<li><a class="reference internal" href="#test-the-describeprocess-request" id="id9">Test the DescribeProcess request</a></li>
<li><a class="reference internal" href="#test-the-execute-request" id="id10">Test the Execute request</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementing-the-python-service" id="id11">Implementing the Python Service</a><ul>
<li><a class="reference internal" href="#general-principles" id="id12">General Principles</a></li>
<li><a class="reference internal" href="#the-hello-service" id="id13">The Hello Service</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interracting-with-your-service-using-execute-requests" id="id14">Interracting with your service using Execute requests</a></li>
<li><a class="reference internal" href="#conclusion" id="id15">Conclusion</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>In this part, you will create and publish from a simple ZOO Service named
<tt class="docutils literal"><span class="pre">Hello</span></tt> which will simply return a hello message containing the input value
provided. It will be usefull to present in deeper details general concept on how ZOO-Kernel works and handles request.</p>
</div>
<div class="section" id="service-and-publication-process-overview">
<h2><a class="toc-backref" href="#table-of-contents">Service and publication process overview</a><a class="headerlink" href="#service-and-publication-process-overview" title="Lien permanent vers ce titre">¶</a></h2>
<p>Before starting developing a ZOO Service, you should remember that in
ZOO-Project, a Service is a couple made of:</p>
<blockquote>
<div><ul class="simple">
<li>a metadata file: a ZOO Service Configuration File (ZCFG) containing metadata
informations about a Service (providing informations about default / supported
inputs and outputs for a Service)</li>
<li>a Services Provider: it depends on the programming language used, but for Python it
is a module and for JavaScript a script file.</li>
</ul>
</div></blockquote>
<p>To publish your Service, which means make your ZOO Kernel aware of its presence,
you should copy a ZCFG file in the directory where <tt class="docutils literal"><span class="pre">zoo_loader.cgi</span></tt> is located (in this workshop, <tt class="docutils literal"><span class="pre">/usr/lib/cgi-bin</span></tt>).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">only the ZCFG file is required  for the Service to be considerate as
available. So if you don&#8217;t get the Service Provider, obviously your Execute
request will fail as we will discuss later.</p>
</div>
<p>Before publication, you should store your ongoing work, so you&#8217;ll start by
creating a directory to store the files of your Services Provider:</p>
<div class="highlight-none"><div class="highlight"><pre>mkdir -p /home/user/zoo-ws-2012/src/zoo-project/zoo-services/ws_sp/cgi-env
</pre></div>
</div>
<p>Once both the ZCFG and the Python module are both ready, you can publish simply
by copying the corresponding files in the same directory as the ZOO-Kernel.</p>
</div>
<div class="section" id="creating-your-first-zcfg-file">
<h2><a class="toc-backref" href="#table-of-contents">Creating your first ZCFG file</a><a class="headerlink" href="#creating-your-first-zcfg-file" title="Lien permanent vers ce titre">¶</a></h2>
<p>You will start by creating the ZCFG file for the <tt class="docutils literal"><span class="pre">Hello</span></tt> Service. Edit the
<tt class="docutils literal"><span class="pre">/home/user/zoo-ws-2012/src/zoo-project/zoo-services/ws_sp/Hello.zcfg</span></tt> file
and add the following content:</p>
<div class="highlight-none"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre>[Hello]
 Title = Return a hello message.
 Abstract = Create a welcome string.
 processVersion = 2
 storeSupported = true
 statusSupported = true
 serviceProvider = test_service
 serviceType = Python
 &lt;DataInputs&gt;
  [name]
   Title = Input string
   Abstract = The string to insert in the hello message.
   minOccurs = 1
   maxOccurs = 1
   &lt;LiteralData&gt;
       dataType = string
       &lt;Default /&gt;
   &lt;/LiteralData&gt;
 &lt;/DataInputs&gt;
 &lt;DataOutputs&gt;
  [Result]
   Title = The resulting string
   Abstract = The hello message containing the input string
   &lt;ComplexData&gt;
   &lt;LiteralData&gt;
       dataType = string
       &lt;Default /&gt;
   &lt;/LiteralData&gt;
   &lt;/ComplexData&gt;
 &lt;/DataOutputs&gt;
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the name of the ZCFG file and the name between braket (here <tt class="docutils literal"><span class="pre">[Hello]</span></tt>)
should be the same and correspond to the function name you will define in your
Services provider.</p>
</div>
<p>As you can see in the ZOO Service Configuration File presented above it is divided into
three distinct sections:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Main Metadata information (from line 2 to 8)</li>
<li>List of Inputs metadata information (from 9 line to 20)</li>
<li>List of Outputs metadata information (from line 21 to 36)</li>
</ol>
</div></blockquote>
<p>You can get more informations about ZCFG from <a class="reference external" href="http://zoo-project.org/docs/services/zcfg-reference.html">the reference documentation</a>.</p>
<p>If you copy the <tt class="docutils literal"><span class="pre">Hello.zcfg</span></tt> file in the same directory as your ZOO Kernel
then you will be able to request for DescribeProcess using the <tt class="docutils literal"><span class="pre">Hello</span></tt>
<tt class="docutils literal"><span class="pre">Identifier</span></tt>. The <tt class="docutils literal"><span class="pre">Hello</span></tt> service should also be listed from Capabilities
document.</p>
</div>
<div class="section" id="test-requests">
<h2><a class="toc-backref" href="#table-of-contents">Test requests</a><a class="headerlink" href="#test-requests" title="Lien permanent vers ce titre">¶</a></h2>
<p>In this section you will tests each WPS requests : GetCapabilities,
DescribeProcess and Execute. Note that only GetCapabilities and DescribeProcess
should work at this step.</p>
<div class="section" id="test-the-getcapabilities-request">
<h3><a class="toc-backref" href="#table-of-contents">Test the GetCapabilities request</a><a class="headerlink" href="#test-the-getcapabilities-request" title="Lien permanent vers ce titre">¶</a></h3>
<p>If you run the <tt class="docutils literal"><span class="pre">GetCapabilities</span></tt> request:</p>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=GetCapabilities&amp;service=WPS
</pre></div>
</div>
<p>Now, you should find your Hello Service in a <tt class="docutils literal"><span class="pre">Process</span></tt> node in
<tt class="docutils literal"><span class="pre">ProcessOfferings</span></tt>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;wps:Process</span> <span class="na">wps:processVersion=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
 <span class="nt">&lt;ows:Identifier&gt;</span>Hello<span class="nt">&lt;/ows:Identifier&gt;</span>
 <span class="nt">&lt;ows:Title&gt;</span>Return a hello message.<span class="nt">&lt;/ows:Title&gt;</span>
 <span class="nt">&lt;ows:Abstract&gt;</span>Create a welcome string.<span class="nt">&lt;/ows:Abstract&gt;</span>
<span class="nt">&lt;/wps:Process&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="test-the-describeprocess-request">
<h3><a class="toc-backref" href="#table-of-contents">Test the DescribeProcess request</a><a class="headerlink" href="#test-the-describeprocess-request" title="Lien permanent vers ce titre">¶</a></h3>
<p>You can access the <tt class="docutils literal"><span class="pre">ProcessDescription</span></tt> of the <tt class="docutils literal"><span class="pre">Hello</span></tt> service using the
following <tt class="docutils literal"><span class="pre">DescribeProcess</span></tt> request:</p>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=DescribeProcess&amp;service=WPS&amp;version=1.0.0&amp;Identifier=Hello
</pre></div>
</div>
<p>You should get the following response:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;wps:ProcessDescriptions</span> <span class="na">xmlns:ows=</span><span class="s">&quot;http://www.opengis.net/ows/1.1&quot;</span> <span class="na">xmlns:wps=</span><span class="s">&quot;http://www.opengis.net/wps/1.0.0&quot;</span> <span class="na">xmlns:xlink=</span><span class="s">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsDescribeProcess_response.xsd&quot;</span> <span class="na">service=</span><span class="s">&quot;WPS&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span> <span class="na">xml:lang=</span><span class="s">&quot;en-US&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ProcessDescription</span> <span class="na">wps:processVersion=</span><span class="s">&quot;2&quot;</span> <span class="na">storeSupported=</span><span class="s">&quot;true&quot;</span> <span class="na">statusSupported=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ows:Identifier&gt;</span>Hello<span class="nt">&lt;/ows:Identifier&gt;</span>
    <span class="nt">&lt;ows:Title&gt;</span>Return a hello message.<span class="nt">&lt;/ows:Title&gt;</span>
    <span class="nt">&lt;ows:Abstract&gt;</span>Create a welcome string.<span class="nt">&lt;/ows:Abstract&gt;</span>
    <span class="nt">&lt;DataInputs&gt;</span>
      <span class="nt">&lt;Input</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ows:Identifier&gt;</span>name<span class="nt">&lt;/ows:Identifier&gt;</span>
        <span class="nt">&lt;ows:Title&gt;</span>Input string<span class="nt">&lt;/ows:Title&gt;</span>
        <span class="nt">&lt;ows:Abstract&gt;</span>The string to insert in the hello message.<span class="nt">&lt;/ows:Abstract&gt;</span>
        <span class="nt">&lt;LiteralData&gt;</span>
          <span class="nt">&lt;ows:DataType</span> <span class="na">ows:reference=</span><span class="s">&quot;http://www.w3.org/TR/xmlschema-2/#string&quot;</span><span class="nt">&gt;</span>string<span class="nt">&lt;/ows:DataType&gt;</span>
          <span class="nt">&lt;ows:AnyValue/&gt;</span>
        <span class="nt">&lt;/LiteralData&gt;</span>
      <span class="nt">&lt;/Input&gt;</span>
    <span class="nt">&lt;/DataInputs&gt;</span>
    <span class="nt">&lt;ProcessOutputs&gt;</span>
      <span class="nt">&lt;Output&gt;</span>
        <span class="nt">&lt;ows:Identifier&gt;</span>Result<span class="nt">&lt;/ows:Identifier&gt;</span>
        <span class="nt">&lt;ows:Title&gt;</span>The resulting string<span class="nt">&lt;/ows:Title&gt;</span>
        <span class="nt">&lt;ows:Abstract&gt;</span>The hello message containing the input string<span class="nt">&lt;/ows:Abstract&gt;</span>
        <span class="nt">&lt;LiteralOutput&gt;</span>
          <span class="nt">&lt;ows:DataType</span> <span class="na">ows:reference=</span><span class="s">&quot;http://www.w3.org/TR/xmlschema-2/#string&quot;</span><span class="nt">&gt;</span>string<span class="nt">&lt;/ows:DataType&gt;</span>
        <span class="nt">&lt;/LiteralOutput&gt;</span>
      <span class="nt">&lt;/Output&gt;</span>
    <span class="nt">&lt;/ProcessOutputs&gt;</span>
  <span class="nt">&lt;/ProcessDescription&gt;</span>
<span class="nt">&lt;/wps:ProcessDescriptions&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="test-the-execute-request">
<h3><a class="toc-backref" href="#table-of-contents">Test the Execute request</a><a class="headerlink" href="#test-the-execute-request" title="Lien permanent vers ce titre">¶</a></h3>
<p>Obviously, you cannot run your Service because the Python file was not published
yet. If you try the following <tt class="docutils literal"><span class="pre">Execute</span></tt> request:</p>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=Execute&amp;service=WPS&amp;version=1.0.0&amp;Identifier=Hello&amp;DataInputs=name=toto
</pre></div>
</div>
<p>You should get an ExceptionReport similar to the one provided in the following,
which is normal behavior:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;ows:ExceptionReport</span> <span class="na">xmlns:ows=</span><span class="s">&quot;http://www.opengis.net/ows/1.1&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xmlns:xlink=</span><span class="s">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.opengis.net/ows/1.1 http://schemas.opengis.net/ows/1.1.0/owsExceptionReport.xsd&quot;</span> <span class="na">xml:lang=</span><span class="s">&quot;en-US&quot;</span> <span class="na">version=</span><span class="s">&quot;1.1.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ows:Exception</span> <span class="na">exceptionCode=</span><span class="s">&quot;NoApplicableCode&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ows:ExceptionText&gt;</span>Python module test_service cannot be loaded.<span class="nt">&lt;/ows:ExceptionText&gt;</span>
  <span class="nt">&lt;/ows:Exception&gt;</span>
<span class="nt">&lt;/ows:ExceptionReport&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="implementing-the-python-service">
<h2><a class="toc-backref" href="#table-of-contents">Implementing the Python Service</a><a class="headerlink" href="#implementing-the-python-service" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="general-principles">
<h3><a class="toc-backref" href="#table-of-contents">General Principles</a><a class="headerlink" href="#general-principles" title="Lien permanent vers ce titre">¶</a></h3>
<p>The most important thing you must know when implementing a new ZOO-Services
using the Python language is that the function corresponding to your Service
returns an integer value representing the status of execution
(<tt class="docutils literal"><span class="pre">SERVICE_FAILED</span></tt> <a class="footnote-reference" href="#f1" id="id1">[1]</a> or <tt class="docutils literal"><span class="pre">SERVICE_SUCCEEDED</span></tt> <a class="footnote-reference" href="#f2" id="id2">[2]</a>) and takes three
arguments (<a class="reference external" href="http://docs.python.org/tutorial/datastructures.html#dictionaries">Python dictionaries</a>):</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">conf</span></tt> : the main environment configuration (corresponding to the main.cfg content)</li>
<li><tt class="docutils literal"><span class="pre">inputs</span></tt> : the requested / default inputs (used to access input values)</li>
<li><tt class="docutils literal"><span class="pre">outputs</span></tt> : the requested / default outputs (used to store computation result)</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when your service return <tt class="docutils literal"><span class="pre">SERVICE_FAILED</span></tt> you can set
<tt class="docutils literal"><span class="pre">conf[&quot;lenv&quot;][&quot;message&quot;]</span></tt> to add a personalized message in the ExceptionReport
returned by the ZOO Kernel in such case.</p>
</div>
<p>You get in the following a sample <tt class="docutils literal"><span class="pre">conf</span></tt> value based on the <tt class="docutils literal"><span class="pre">main.cfg</span></tt> file you
saw <a class="reference external" href="using_zoo_from_osgeolivevm.html#zoo-kernel-configuration">before</a>.</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;main&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">language</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
    <span class="nx">lang</span><span class="o">:</span> <span class="s2">&quot;fr-FR,ja-JP&quot;</span><span class="p">,</span>
    <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="nx">encoding</span><span class="o">:</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="nx">serverAddress</span><span class="o">:</span> <span class="s2">&quot;http://localhost/cgi-bin/zoo_loader.cgi&quot;</span><span class="p">,</span>
    <span class="nx">dataPath</span><span class="o">:</span> <span class="s2">&quot;/var/www/zoows-demo/map/data&quot;</span><span class="p">,</span>
    <span class="nx">tmpPath</span><span class="o">:</span> <span class="s2">&quot;/var/www/temp&quot;</span><span class="p">,</span>
    <span class="nx">tmpUrl</span><span class="o">:</span> <span class="s2">&quot;../temp&quot;</span><span class="p">,</span>
    <span class="nx">cacheDir</span><span class="o">:</span> <span class="s2">&quot;/var/www/temp/&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;identification&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;The ZOO-Project OSGeoLiveDVD Server 2012&quot;</span><span class="p">,</span>
    <span class="nx">keywords</span><span class="o">:</span> <span class="s2">&quot;WPS,GIS,buffer&quot;</span><span class="p">,</span>
    <span class="kr">abstract</span><span class="o">:</span> <span class="s2">&quot;Demo version of Zoo-Project for OSGeoLiveDVD 2012. See http://www.zoo-project.org&quot;</span><span class="p">,</span>
    <span class="nx">accessConstraints</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="nx">fees</span><span class="o">:</span> <span class="s2">&quot;None&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;provider&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">positionName</span><span class="o">:</span> <span class="s2">&quot;Developer&quot;</span><span class="p">,</span>
    <span class="nx">providerName</span><span class="o">:</span> <span class="s2">&quot;ZOO-Project&quot;</span><span class="p">,</span>
    <span class="nx">addressAdministrativeArea</span><span class="o">:</span> <span class="s2">&quot;Lattes&quot;</span><span class="p">,</span>
    <span class="nx">addressCountry</span><span class="o">:</span> <span class="s2">&quot;fr&quot;</span><span class="p">,</span>
    <span class="nx">phoneVoice</span><span class="o">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
    <span class="nx">addressPostalCode</span><span class="o">:</span> <span class="s2">&quot;34970&quot;</span><span class="p">,</span>
    <span class="nx">role</span><span class="o">:</span> <span class="s2">&quot;Dev&quot;</span><span class="p">,</span>
    <span class="nx">providerSite</span><span class="o">:</span> <span class="s2">&quot;http://www.zoo-project.org&quot;</span><span class="p">,</span>
    <span class="nx">phoneFacsimile</span><span class="o">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
    <span class="nx">addressElectronicMailAddress</span><span class="o">:</span> <span class="s2">&quot;gerald.fenoy@geolabs.fr&quot;</span><span class="p">,</span>
    <span class="nx">addressCity</span><span class="o">:</span> <span class="s2">&quot;Denver&quot;</span><span class="p">,</span>
    <span class="nx">individualName</span><span class="o">:</span> <span class="s2">&quot;Gérald FENOY&quot;</span>
  <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>In the following you get a sample outputs value passed to a Python or a JavaScript Service:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">{</span>
  <span class="s1">&#39;Result&#39;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;mimeType&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;inRequest&#39;</span><span class="o">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
    <span class="s1">&#39;encoding&#39;</span><span class="o">:</span> <span class="s1">&#39;UTF-8&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <tt class="docutils literal"><span class="pre">inRequest</span></tt> value is set internally by the ZOO-Kernel and can be    used to determine from the Service if the key was provided in the request.</p>
</div>
</div>
<div class="section" id="the-hello-service">
<h3><a class="toc-backref" href="#table-of-contents">The Hello Service</a><a class="headerlink" href="#the-hello-service" title="Lien permanent vers ce titre">¶</a></h3>
<p>You can copy and paste the following into the
<tt class="docutils literal"><span class="pre">/home/user/zoo-ws-2012/src/zoo-project/zoo-services/ws_sp/cgi-env/test_service.py</span></tt> file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">Hello</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span><span class="n">inputs</span><span class="p">,</span><span class="n">outputs</span><span class="p">):</span>
    <span class="n">outputs</span><span class="p">[</span><span class="s">&quot;Result&quot;</span><span class="p">][</span><span class="s">&quot;value&quot;</span><span class="p">]</span><span class="o">=</span>\
            <span class="s">&quot;Hello &quot;</span><span class="o">+</span><span class="n">inputs</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">][</span><span class="s">&quot;value&quot;</span><span class="p">]</span><span class="o">+</span><span class="s">&quot; from the ZOO-Project Python world !&quot;</span>
    <span class="k">return</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Once you finish editing the file, you should copy it in the <tt class="docutils literal"><span class="pre">/usr/lib/cgi-bin</span></tt> directory:</p>
<div class="highlight-none"><div class="highlight"><pre>sudo cp /home/user/zoo-ws-2012/src/zoo-project/zoo-services/ws_sp/cgi-env/* /usr/lib/cgi-bin
</pre></div>
</div>
</div>
</div>
<div class="section" id="interracting-with-your-service-using-execute-requests">
<h2><a class="toc-backref" href="#table-of-contents">Interracting with your service using Execute requests</a><a class="headerlink" href="#interracting-with-your-service-using-execute-requests" title="Lien permanent vers ce titre">¶</a></h2>
<p>Now, you can request for Execute using the following basic url:</p>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=Execute&amp;service=WPS&amp;version=1.0.0&amp;Identifier=Hello&amp;DataInputs=name=toto
</pre></div>
</div>
<p>You can request the WPS Server to return a XML WPS Response containing the result of
your computation, requesting for ResponseDocument or you can access the data directly
requesting for RawDataOutput.</p>
<ul class="simple">
<li>Sample request using the RawDataOutput parameter:</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=Execute&amp;service=WPS&amp;version=1.0.0&amp;Identifier=Hello&amp;DataInputs=name=toto&amp;RawDataOutput=Result
</pre></div>
</div>
<ul class="simple">
<li>Sample request using the default ResponseDocument parameter:</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=Execute&amp;service=WPS&amp;version=1.0.0&amp;Identifier=Hello&amp;DataInputs=name=toto&amp;ResponseDocument=Result
</pre></div>
</div>
<p>When you are using ResponseDocument there is specific attribut you can use to ask
the ZOO Kernel to store the result: <tt class="docutils literal"><span class="pre">asReference</span></tt>. You can use the following example:</p>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=Execute&amp;service=WPS&amp;version=1.0.0&amp;Identifier=Hello&amp;DataInputs=name=toto&amp;ResponseDocument=Result@asReference=true
</pre></div>
</div>
<p>When computation take long time, the client should request setting both
<tt class="docutils literal"><span class="pre">storeExecuteResponse</span></tt> and <tt class="docutils literal"><span class="pre">status</span></tt> parameter to true. This will make the ZOO
Kernel directly return a response containing a <tt class="docutils literal"><span class="pre">statusLocation</span></tt> attribut which can be
used to access the status of an ongoing service or the result when the process ended.</p>
<div class="highlight-none"><div class="highlight"><pre>http://localhost/cgi-bin/zoo_loader.cgi?request=Execute&amp;service=WPS&amp;version=1.0.0&amp;Identifier=Hello&amp;DataInputs=name=toto&amp;ResponseDocument=Result&amp;storeExecuteResponse=true&amp;status=true
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#table-of-contents">Conclusion</a><a class="headerlink" href="#conclusion" title="Lien permanent vers ce titre">¶</a></h2>
<p>Even if this first service was really simple it was useful to illustrate how the
ZOO-Kernel fill <tt class="docutils literal"><span class="pre">conf</span></tt>, <tt class="docutils literal"><span class="pre">inputs</span></tt> and <tt class="docutils literal"><span class="pre">outputs</span></tt> parameter prior to load
and run your function service, how to write a ZCFG file, how to publish a Services
Provider by placing the ZCFG and Python files in the same directory as the
ZOO-Kernel, then how to interract with your service using both
<tt class="docutils literal"><span class="pre">GetCapabilities</span></tt>, <tt class="docutils literal"><span class="pre">DescribeProcess</span></tt> and <tt class="docutils literal"><span class="pre">Execute</span></tt> requesr. We will see
in the <a class="reference external" href="ogr_base_vect_ops.html">next section</a> how to write similar requests
using the XML syntax.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><tt class="docutils literal"><span class="pre">SERVICE_FAILED=4</span></tt></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><tt class="docutils literal"><span class="pre">SERVICE_SUCCEEDED=3</span></tt></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table des Matières</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../kernel/index.html">Documentation du Kernel ZOO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/index.html">Documentation de services ZOO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">ZOO API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2010/index.html">Workshop: Practical Introduction to ZOO: The Open WPS Platform</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Practical Introduction to ZOO-Project by playing with building blocks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#foss4g-2012-prague">FOSS4G 2012 Prague</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sponsored-by">Sponsored By</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#special-thanks-to-our-knowledge-partners">Special thanks to our Knowledge Partners</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#workshop-table-of-content">WorkShop table of content</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Creating your first ZOO Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="building_blocks_presentation.html">Presenting building blocks - Using OGR based Web Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2013/index.html">ZOO-Project: jouer avec des blocs de construction pour construire une application web pgRouting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Communauté ZOO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/documentation.html">Guide de développement de la documentation</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Recherche rapide</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<!-- Begin Footer -->
<div id="footer">
<div>

<div>
  <div class="menuContainer">
    <div class="menuItemList">
      <a href="../../index.html" shape="rect">Home</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">ZOO Project</a>

      <br/>
      <a href="/site/ZooWebSite/ZooProject/About" shape="rect">About</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Tribe" shape="rect">ZOO Tribe</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Events" shape="rect">Events</a>
      <br/>

      <a href="/site/ZooWebSite/ZooProject/Photos" shape="rect">Photos</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Contact" shape="rect">Contacts</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Components</a>

      <br/>
      <a href="/site/ZooWebSite/ZooKernel" shape="rect">ZOO Kernel</a>
      <br/>
      <a href="/site/ZooWebSite/ZooServices" shape="rect">ZOO Services</a>
      <br/>
      <a href="/site/ZooWebsite/ZooApi" shape="rect">ZOO API</a>
      <br/>

    </div>
    <div class="menuItemList">
      <a href="../../dl/index.html" shape="rect">Download</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Docs</a>

      <br/>
      <a href="../../doc/en/index.html" shape="rect">English version</a>
      <br/>
      <a href="../../doc/fr/index.html" shape="rect">version française</a>
      <br/>

    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Demos</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/SpatialTools" shape="rect">ZOO Spatial Tools</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/WFS-T" shape="rect">ZOO Mapserver WFS-T</a>

      <br/>
      <a href="/site/ZooWebSite/Demo/GdalProfile" shape="rect">ZOO Elevation Profile</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/FormTools" shape="rect">ZOO Form tools</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="/trac" shape="rect">Trac</a>

      <br/>
    </div>
  </div>
  <br style="clear:both"/>
</div>
</div>
<p>
&copy; Copyright 2011 - <a class="ext-link" href="http://www.zoo-project.org" shape="rect"><span class="icon"> </span>ZOO Project</a> - All Rights Reserved. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b3.
</p>
</div>
<!-- End Footer -->
    
    <div class="footer">
    </div>

  </body>
</html>