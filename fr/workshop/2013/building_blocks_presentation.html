<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Présentation des blocs de construction - Utiliser des Services Web basés sur OGR et PgRouting &mdash; ZOO Project 1.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="ZOO Project 1.3 documentation" href="../../index.html" />
    <link rel="up" title="ZOO-Project: jouer avec des blocs de construction pour construire une application web pgRouting" href="index.html" />
    <link rel="next" title="Jouer avec les blocs de construction - Créer des Services Web JavaScript" href="js_services_chaining.html" />
    <link rel="prev" title="Créer votre premier service ZOO" href="first_service.html" />

<script type="text/javascript">
$(document).ready(function(){

	$("ul.topnav li a").hover(function() {

		//Following events are applied to the subnav itself (moving subnav up and down)
		$(this).parent().find("ul.subnav").slideDown('fast').show(); //Drop down the subnav on click

		$(this).parent().hover(function() {
		}, function(){
			$(this).parent().find("ul.subnav").slideUp('slow'); //When the mouse hovers out of the subnav, move it back up
		});

		//Following events are applied to the trigger (Hover events for the trigger)
		}).hover(function() {
			$(this).addClass("subhover"); //On hover over, add class "subhover"
		}, function(){	//On Hover Out
			$(this).removeClass("subhover"); //On hover out, remove class "subhover"
	});

});
</script>

     

  </head>
  <body>
<!-- Begin Header -->
<div id="wrapper">
  	<div id="myheader">
    	<div class="hleft">
    	  <h1 class="title">Open WPS Platform</h1>
    	</div>
    	<div class="hright">
    	</div>
  	</div>
</div>
<ul class="topnav">
  <li><a href="http://www.zoo-project.org/">Home</a></li>
  <li><a href="#">ZOO Project</a>
       <ul class="subnav">

         <li><a href="/site/ZooWebSite/ZooProject/About">About</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Tribe">ZOO Tribe</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Events">Events</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Photos">Photos</a></li>
         <li><a href="/site/ZooWebSite/ZooProject/Contact">Contacts</a></li>
       </ul>

  </li>
  <li>
    <a href="#">Components</a>
    <ul class="subnav">
      <li><a href="/site/ZooWebSite/ZooKernel">ZOO Kernel</a></li>
      <li><a href="/site/ZooWebSite/ZooServices">ZOO Services</a></li>
      <li><a href="/site/ZooWebsite/ZooApi">ZOO API</a></li>

    </ul>
  </li>
  <li><a href="/site/Downloads">Download</a></li>
  <li><a href="#">Docs</a>
    <ul class="subnav">
      <li><a href="../../../en/index.html">English</a></li>
      <li><a href="../../../fr/index.html">Français</a></li>
    </ul>
  </li>
  <li><a href="#">Demos</a>
    <ul class="subnav">
      <li><a href="/site/ZooWebSite/Demo/SpatialTools">ZOO Spatial Tools</a></li>

      <li><a href="/site/ZooWebSite/Demo/CGAL">ZOO CGAL Vor</a></li>
      <li><a href="/site/ZooWebSite/Demo/WFS-T">ZOO Mapserver WFS-T</a></li>
      <li><a href="/site/ZooWebSite/Demo/GdalProfile">ZOO Elevation Profile</a></li>
      <li><a href="/site/ZooWebSite/Demo/FormTools">ZOO Form tools</a></li>
    </ul>
  </li>
  <li><a href="/trac">Trac</a></li>
</ul>
<!-- End Header -->
    

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="js_services_chaining.html" title="Jouer avec les blocs de construction - Créer des Services Web JavaScript"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="first_service.html" title="Créer votre premier service ZOO"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">ZOO Docs</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">ZOO-Project: jouer avec des blocs de construction pour construire une application web pgRouting</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="building-blocks-presentation-using-ogr-and-pgrouting-based-web-services">
<span id="ogr-base-vect-ops"></span><h1><a class="toc-backref" href="#table-of-contents">Présentation des blocs de construction - Utiliser des Services Web basés sur OGR et PgRouting</a><a class="headerlink" href="#building-blocks-presentation-using-ogr-and-pgrouting-based-web-services" title="Lien permanent vers ce titre">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table des matières</p>
<ul class="simple">
<li><a class="reference internal" href="#building-blocks-presentation-using-ogr-and-pgrouting-based-web-services" id="id1">Présentation des blocs de construction - Utiliser des Services Web basés sur OGR et PgRouting</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#services-provider-and-configuration-files" id="id3">Forunisseur de services et fichiers de configuration</a></li>
<li><a class="reference internal" href="#the-buffer-service" id="id4">Le service Buffer (de tampon)</a></li>
<li><a class="reference internal" href="#the-intersection-service" id="id5">Le service d&#8217;Intersection</a></li>
<li><a class="reference internal" href="#the-differencepy-service" id="id6">Le service DifferencePy</a></li>
<li><a class="reference internal" href="#the-routing-and-profile-services" id="id7">Le routage et les services de profil</a></li>
<li><a class="reference internal" href="#conclusion" id="id8">Conclusion</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans cette section, vous allez utiliser des ZOO-Services basiques: <tt class="docutils literal"><span class="pre">Buffer</span></tt>, <tt class="docutils literal"><span class="pre">Intersection</span></tt> et <tt class="docutils literal"><span class="pre">DifferencePy</span></tt> qui utilisent OGR et des modules psycopg Python. Le but visé de cette section est de présenter et d&#8217;interagir avec vos nouveaux blocs de construction avant de les chaîner dans la section suivante.</p>
<p>Tout d&#8217;abord, vous devez utiliser les liens suivants pour accéder aux interfaces utilisateur et interagir avec vos services, le premier est utilisé pour accéder à l&#8217;interface cliente de démonstration avec outils spatiaux basiques et la seconde pour accéder à l&#8217;application de routage :</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://localhost/zoows2013-demo/spatialtools-py.html">http://localhost/zoows2013-demo/spatialtools-py.html</a></li>
<li><a class="reference external" href="http://localhost/zoo-ws2013/">http://localhost/zoo-ws2013/</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="services-provider-and-configuration-files">
<h2><a class="toc-backref" href="#table-of-contents">Forunisseur de services et fichiers de configuration</a><a class="headerlink" href="#services-provider-and-configuration-files" title="Lien permanent vers ce titre">¶</a></h2>
<p>D&#8217;abord, vous pouvez vérifier si les ZOO-Services sont disponibles à partir de votre configuration actuelle. Vous pouvez jeter un oeil à <tt class="docutils literal"><span class="pre">Buffer.zcfg</span></tt>, <tt class="docutils literal"><span class="pre">Intersection.zcfg</span></tt> et <tt class="docutils literal"><span class="pre">DifferencePy.zcfg</span></tt> pour obtenir des détails sur les paramètres. Comme vous pouvez le voir depuis les fichiers ZCFG, vous allez utiliser les ZOO-services fournis par le fournisseur de services Python <tt class="docutils literal"><span class="pre">service</span></tt>. Donc, si vous voulez modifier le code Python, vous devrez modifier le fichier correspondant (c&#8217;est à dire <tt class="docutils literal"><span class="pre">service.py</span></tt>). Vous êtes invités à utiliser des requêtes similaires à celle utilisée dans les sections précédentes pour en apprendre davantage sur chacun des services individuellement.</p>
</div>
<div class="section" id="the-buffer-service">
<h2><a class="toc-backref" href="#table-of-contents">Le service Buffer (de tampon)</a><a class="headerlink" href="#the-buffer-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cliquez d&#8217;abord sur une rue, puis une fois que la rue est affichée en bleu, cliquez sur le bouton &#8216;Buffer&#8217; au dessus, vous devriez obtenir un résultat similaire à celui affiché dans ce qui suit.</p>
<a class="reference internal image-reference" href="../../_images/Buffer_Level_151.png"><img alt="../../_images/Buffer_Level_151.png" class="align-center" src="../../_images/Buffer_Level_151.png" style="width: 650px;" /></a>
<p>Depuis la version 1.2.0 du ZOO-projet, vous pouvez exécuter automatiquement quelques tests basiques pour s&#8217;assurer que vous avez écrit un fichier ZCFG correct et que votre service est validé.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">le test actuel est vraiment simple et doit être adapté à chaque fournisseur de services, principalement pour définir les noms en entrée.</p>
</div>
<p>Vous pouvez utiliser la commande suivante :</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /home/user/zoo/testing
./run.sh http://localhost/cgi-bin/zoo_loader.cgi Buffer
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pendant ou après l&#8217;exécution du test, vous pouvez jeter un oeil à l&#8217;intérieur du répertoire <tt class="docutils literal"><span class="pre">tmp</span></tt> qui contient à la fois les demandes XML envoyées au Kernel ZOO et les réponses qu&#8217;il a renvoyé (<tt class="docutils literal"><span class="pre">output*.xml</span></tt>).</p>
</div>
</div>
<div class="section" id="the-intersection-service">
<h2><a class="toc-backref" href="#table-of-contents">Le service d&#8217;Intersection</a><a class="headerlink" href="#the-intersection-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>En utilisant la même interface cliente que précédemment, une fois que vous avez un tampon, vous pouvez sélectionner une rue intersectant la géométrie tampon pour calculer l&#8217;intersection en cliquant sur le bouton Intersection.</p>
<a class="reference internal image-reference" href="../../_images/Intersection_Level_151.png"><img alt="../../_images/Intersection_Level_151.png" class="align-center" src="../../_images/Intersection_Level_151.png" style="width: 650px;" /></a>
</div>
<div class="section" id="the-differencepy-service">
<h2><a class="toc-backref" href="#table-of-contents">Le service DifferencePy</a><a class="headerlink" href="#the-differencepy-service" title="Lien permanent vers ce titre">¶</a></h2>
<p>En utilisant les mêmes instructions que pour Intersection, vous pouvez obtenir le résultat suivant.</p>
<a class="reference internal image-reference" href="../../_images/Difference_Level_151.png"><img alt="../../_images/Difference_Level_151.png" class="align-center" src="../../_images/Difference_Level_151.png" style="width: 650px;" /></a>
</div>
<div class="section" id="the-routing-and-profile-services">
<h2><a class="toc-backref" href="#table-of-contents">Le routage et les services de profil</a><a class="headerlink" href="#the-routing-and-profile-services" title="Lien permanent vers ce titre">¶</a></h2>
<p>D&#8217;abord cliquez sur le drapeau bleu puis placez votre point de départ sur ​​la carte, faire la même chose avec le drapeau rouge pour obtenir le plus court chemin calculé par le service dédié et afficher son profil. Notez que lorsque vous passez la souris sur l&#8217;écran du profil, vous verrez sa position correspondante affichée sur la carte. Vous pouvez également cliquer sur une étape spécifique dans votre chemin pour obtenir la ligne correspondante affichée.</p>
<a class="reference internal image-reference" href="../../_images/Routing_Basic.png"><img alt="../../_images/Routing_Basic.png" class="align-center" src="../../_images/Routing_Basic.png" style="width: 650px;" /></a>
<p>Si vous jetez un oeil dans le fichier: <tt class="docutils literal"><span class="pre">/usr/lib/cgi-bin/routing/do.zcfg</span></tt> vous remarquerez peut-être quelque chose de nouveau dans le format supporté qui est reproduit ci-après.</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="nt">&lt;Supported&gt;</span>
 mimeType = image/png
 asReference = true
 msStyle = STYLE COLOR 125 0 105 OUTLINECOLOR 0 0 0 WIDTH 3 END
 useMapServer = true
 extension = json
<span class="nt">&lt;/Supported&gt;</span>
</pre></div>
</div>
<p>Le <tt class="docutils literal"><span class="pre">mimeType</span></tt> est défini comme <tt class="docutils literal"><span class="pre">image/png</span></tt> et il ya deux nouveaux paramètres, qui sont tous deux optionnels:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><tt class="docutils literal"><span class="pre">useMapServer</span></tt>: qui vous rend capable d&#8217;informer le ZOO-Kernel qu&#8217;il a à utiliser MapServer pour publier votre résultat comme WMS / WFS ou WCS (ce dernier ne sera pas utilisé dans ce workshop) plutôt que de simplement stocker le résultat comme un fichier.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">msStyle</span></tt>: qui vous laisse définir votre propre définition de bloc <tt class="docutils literal"><span class="pre">STYLE</span></tt> MapServer.</p>
</li>
</ul>
</div></blockquote>
<p>Lorsque vous avez besoin d&#8217;accéder à un résultat de noùmbreuses fois ou à des fins différentes en fonction d&#8217;autres services alors il est vraiment utile de demander au ZOO-Kernel de publier votre résultat comme WMS, WFS ou WCS.</p>
<p>Notez qu&#8217;aucune modification du code du service do a été nécessaire pour gérer la publication automatique du résultat car c&#8217;est un format vectoriel supporté par OGR, seule la modification du zcfg était nécessaire.</p>
<p>Cet exemple de routage est ici pour illustrer comme il est facile de publier votre résultat comme ressource WMS, WFS ou WCS. En effet, lorsque votre service de routage a été appelé, le ZOO-Kernel a publié le résultat comme ressources WMS et WFS qui a été utilisé à la fois dans l&#8217;interface graphique pour que le WMS affiche la trajectoire résultante sur la carte, que le WFS affiche plus de détails sur chacune des étapes. Le protocole WFS est également utilisé comme valeur d&#8217;entrée pour le calcul du profil. Ainsi, le calcul a été exécuté une fois et accédé trois fois pour différents buts et depuis différents clients.</p>
<p>Pour plus d&#8217;informations sur le support MapServer, merci de vous référer à <a class="reference external" href="http://zoo-project.org/docs/kernel/mapserver.html">la documentation ZOO-Project officielle</a>.</p>
</div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#table-of-contents">Conclusion</a><a class="headerlink" href="#conclusion" title="Lien permanent vers ce titre">¶</a></h2>
<p>Maintenant, vous connaissez ces trois services, et vous avez une interface simple pour interagir avec votre WFS MapServer et vos serveurs WPS ZOO-projet, vous êtes prêts à utiliser les services d&#8217;une manière différente, en les chaînant en utilisant la ZOO-API JavaScript pour construire des services plus complexes et plus puissants.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table des Matières</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../kernel/index.html">Documentation du Kernel ZOO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/index.html">Documentation de services ZOO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">ZOO API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2010/index.html">Workshop: Practical Introduction to ZOO: The Open WPS Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2012/index.html">Practical Introduction to ZOO-Project by playing with building blocks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ZOO-Project: jouer avec des blocs de construction pour construire une application web pgRouting</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#foss4g-2013-nottingham">FOSS4G 2013 Nottingham</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#foss4g-cee-2013-bucharest">FOSS4G-CEE 2013 Bucharest</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sponsored-by">Sponsorisé par</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#special-thanks-to-our-knowledge-partners">Merci à nos partenaires de connaissance</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#workshop-table-of-content">Tables des matières du workshop</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_zoo_from_osgeolivevm.html">Configuration et utilisation du ZOO-Kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="first_service.html">Créer votre premier service ZOO</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Présentation des blocs de construction - Utiliser des Services Web basés sur OGR et PgRouting</a></li>
<li class="toctree-l3"><a class="reference internal" href="js_services_chaining.html">Jouer avec les blocs de construction - Créer des Services Web JavaScript</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Communauté ZOO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/documentation.html">Guide de développement de la documentation</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Recherche rapide</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<!-- Begin Footer -->
<div id="footer">
<div>

<div>
  <div class="menuContainer">
    <div class="menuItemList">
      <a href="../../index.html" shape="rect">Home</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">ZOO Project</a>

      <br/>
      <a href="/site/ZooWebSite/ZooProject/About" shape="rect">About</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Tribe" shape="rect">ZOO Tribe</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Events" shape="rect">Events</a>
      <br/>

      <a href="/site/ZooWebSite/ZooProject/Photos" shape="rect">Photos</a>
      <br/>
      <a href="/site/ZooWebSite/ZooProject/Contact" shape="rect">Contacts</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Components</a>

      <br/>
      <a href="/site/ZooWebSite/ZooKernel" shape="rect">ZOO Kernel</a>
      <br/>
      <a href="/site/ZooWebSite/ZooServices" shape="rect">ZOO Services</a>
      <br/>
      <a href="/site/ZooWebsite/ZooApi" shape="rect">ZOO API</a>
      <br/>

    </div>
    <div class="menuItemList">
      <a href="../../dl/index.html" shape="rect">Download</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Docs</a>

      <br/>
      <a href="../../doc/en/index.html" shape="rect">English version</a>
      <br/>
      <a href="../../doc/fr/index.html" shape="rect">version française</a>
      <br/>

    </div>
    <div class="menuItemList">
      <a href="#" shape="rect">Demos</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/SpatialTools" shape="rect">ZOO Spatial Tools</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/WFS-T" shape="rect">ZOO Mapserver WFS-T</a>

      <br/>
      <a href="/site/ZooWebSite/Demo/GdalProfile" shape="rect">ZOO Elevation Profile</a>
      <br/>
      <a href="/site/ZooWebSite/Demo/FormTools" shape="rect">ZOO Form tools</a>
      <br/>
    </div>
    <div class="menuItemList">
      <a href="/trac" shape="rect">Trac</a>

      <br/>
    </div>
  </div>
  <br style="clear:both"/>
</div>
</div>
<p>
&copy; Copyright 2011 - <a class="ext-link" href="http://www.zoo-project.org" shape="rect"><span class="icon"> </span>ZOO Project</a> - All Rights Reserved. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b3.
</p>
</div>
<!-- End Footer -->
    
    <div class="footer">
    </div>

  </body>
</html>